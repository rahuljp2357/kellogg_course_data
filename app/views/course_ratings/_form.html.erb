<% was_validated = course_rating.errors.any? %>

<%= form_with(model: course_rating, local: true, novalidate: true, class: "mb-3") do |f| %>
  <%= f.hidden_field :user_id, value: current_user.id %>
  <div class="form-group">
    <% facet_1_rating_class = "form-control" %>
    <% facet_1_rating_was_invalid = course_rating.errors.include?(:facet_1_rating) %>

    <% if was_validated %>
      <% if facet_1_rating_was_invalid %>
        <% facet_1_rating_class << " is-invalid" %>
      <% else %>
        <% facet_1_rating_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :facet_1_rating %>
    <%= f.number_field :facet_1_rating, class: facet_1_rating_class, placeholder: "Enter facet 1 rating" %>
    <% if facet_1_rating_was_invalid %>
      <% course_rating.errors.full_messages_for(:facet_1_rating).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% facet_2_rating_class = "form-control" %>
    <% facet_2_rating_was_invalid = course_rating.errors.include?(:facet_2_rating) %>

    <% if was_validated %>
      <% if facet_2_rating_was_invalid %>
        <% facet_2_rating_class << " is-invalid" %>
      <% else %>
        <% facet_2_rating_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :facet_2_rating %>
    <%= f.number_field :facet_2_rating, class: facet_2_rating_class, placeholder: "Enter facet 2 rating" %>
    <% if facet_2_rating_was_invalid %>
      <% course_rating.errors.full_messages_for(:facet_2_rating).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% facet_3_rating_class = "form-control" %>
    <% facet_3_rating_was_invalid = course_rating.errors.include?(:facet_3_rating) %>

    <% if was_validated %>
      <% if facet_3_rating_was_invalid %>
        <% facet_3_rating_class << " is-invalid" %>
      <% else %>
        <% facet_3_rating_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :facet_3_rating %>
    <%= f.number_field :facet_3_rating, class: facet_3_rating_class, placeholder: "Enter facet 3 rating" %>
    <% if facet_3_rating_was_invalid %>
      <% course_rating.errors.full_messages_for(:facet_3_rating).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% facet_4_rating_class = "form-control" %>
    <% facet_4_rating_was_invalid = course_rating.errors.include?(:facet_4_rating) %>

    <% if was_validated %>
      <% if facet_4_rating_was_invalid %>
        <% facet_4_rating_class << " is-invalid" %>
      <% else %>
        <% facet_4_rating_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :facet_4_rating %>
    <%= f.number_field :facet_4_rating, class: facet_4_rating_class, placeholder: "Enter facet 4 rating" %>
    <% if facet_4_rating_was_invalid %>
      <% course_rating.errors.full_messages_for(:facet_4_rating).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% facet_5_rating_class = "form-control" %>
    <% facet_5_rating_was_invalid = course_rating.errors.include?(:facet_5_rating) %>

    <% if was_validated %>
      <% if facet_5_rating_was_invalid %>
        <% facet_5_rating_class << " is-invalid" %>
      <% else %>
        <% facet_5_rating_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :facet_5_rating %>
    <%= f.number_field :facet_5_rating, class: facet_5_rating_class, placeholder: "Enter facet 5 rating" %>
    <% if facet_5_rating_was_invalid %>
      <% course_rating.errors.full_messages_for(:facet_5_rating).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% descriptive_q1_class = "form-control" %>
    <% descriptive_q1_was_invalid = course_rating.errors.include?(:descriptive_q1) %>

    <% if was_validated %>
      <% if descriptive_q1_was_invalid %>
        <% descriptive_q1_class << " is-invalid" %>
      <% else %>
        <% descriptive_q1_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :descriptive_q1 %>
    <%= f.text_field :descriptive_q1, class: descriptive_q1_class, placeholder: "Enter descriptive q1" %>
    <% if descriptive_q1_was_invalid %>
      <% course_rating.errors.full_messages_for(:descriptive_q1).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% descriptive_q2_class = "form-control" %>
    <% descriptive_q2_was_invalid = course_rating.errors.include?(:descriptive_q2) %>

    <% if was_validated %>
      <% if descriptive_q2_was_invalid %>
        <% descriptive_q2_class << " is-invalid" %>
      <% else %>
        <% descriptive_q2_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :descriptive_q2 %>
    <%= f.text_field :descriptive_q2, class: descriptive_q2_class, placeholder: "Enter descriptive q2" %>
    <% if descriptive_q2_was_invalid %>
      <% course_rating.errors.full_messages_for(:descriptive_q2).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% descriptive_q3_class = "form-control" %>
    <% descriptive_q3_was_invalid = course_rating.errors.include?(:descriptive_q3) %>

    <% if was_validated %>
      <% if descriptive_q3_was_invalid %>
        <% descriptive_q3_class << " is-invalid" %>
      <% else %>
        <% descriptive_q3_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :descriptive_q3 %>
    <%= f.text_field :descriptive_q3, class: descriptive_q3_class, placeholder: "Enter descriptive q3" %>
    <% if descriptive_q3_was_invalid %>
      <% course_rating.errors.full_messages_for(:descriptive_q3).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="form-group">
    <% course_offering_class = "form-control" %>
    <% course_offering_was_invalid = course_rating.errors.include?(:course_offering) %>

    <% if was_validated %>
      <% if course_offering_was_invalid %>
        <% course_offering_class << " is-invalid" %>
      <% else %>
        <% course_offering_class << " is-valid" %>
      <% end %>
    <% end %>

    <%= f.label :course_offering_id %>
    <%= f.collection_select :course_offering_id, CourseOffering.all, :id, :to_s, {}, class: "form-control" %>
    <% if course_offering_was_invalid %>
      <% course_rating.errors.full_messages_for(:course_offering).each do |message| %>
        <div class="invalid-feedback d-flex">
          <%= message %>
        </div>
      <% end %>
    <% end %>
  </div>
  <%= f.button class: "btn btn-outline-secondary btn-block" %>
<% end %>
